# 文档说明

## 文件结构

### Markdown文档

#### 核心文档
- **README.md** - 项目总览，包含特性、技术栈、项目结构、使用方法
- **AGENTS.md** - 开发指南，包含代码规范、构建命令、开发工具使用
- **PLAN.md** - 开发计划，详细的开发阶段和TODO

#### 专项文档
- **BAZI_ALGORITHM_FIX.md** - 八字算法修复详解
  - 月柱计算错误及修复
  - 时柱计算错误及修复
  - 节气映射表修正
  - 五鼠遁表修正
  - 测试用例验证

- **DEVELOPMENT_HISTORY.md** - 开发历程
  - 项目各阶段完成情况
  - 关键修复和优化
  - 文档体系
  - 版本历史

### Python文件

#### 主程序
- **test_bazi_agent.py** - 八字智能计算主程序
  - 交互式模式：可连续计算多个八字
  - 单次测试模式：计算一次后退出
  - 统一LLM处理：所有输入都通过LLM解析
  - 支持多种输入格式

#### 其他文件（已清理）
所有临时测试文件和辅助脚本已删除，保持项目目录简洁。

## 使用指南

### 快速开始

1. **配置API密钥**
   ```bash
   编辑 .env 文件，配置：
   QWEN_API_KEY=your_api_key_here
   QWEN_BASE_URL=https://dashscope.aliyuncs.com/compatible-mode/v1
   QWEN_MODEL=qwen-plus
   ```

2. **运行八字计算**
   ```bash
   python test_bazi_agent.py
   ```

3. **选择运行模式**
   ```
   1. 交互式模式（可多次输入）
   2. 单次测试模式（计算一次后退出）
   ```

4. **输入出生信息**
   支持任意格式的输入，例如：
   - "我出生于1999年10月17日凌晨3点，男性"
   - "2025年12月30日下午6点，女的，公历"
   - "男孩，出生在甲辰年二月十五日上午10点"

### 文档阅读

#### 新手入门
1. 先阅读 **README.md** 了解项目概况
2. 阅读 **DEVELOPMENT_HISTORY.md** 了解开发历程
3. 阅读 **BAZI_ALGORITHM_FIX.md** 了解算法修复过程

#### 开发者指南
1. 阅读 **AGENTS.md** 了解开发规范
2. 阅读 **PLAN.md** 了解开发计划
3. 参考代码实现进行开发

## 核心功能

### 八字计算
- ✅ 准确的年月日时四柱计算
- ✅ 完整天文节气计算
- ✅ 五行分析和用神推算
- ✅ 已修复月柱和时柱计算错误

### 智能输入解析
- ✅ 统一使用LLM处理所有输入
- ✅ 支持多种自然语言表达
- ✅ 智能纠错和补全
- ✅ 灵活的输入格式

### 用户交互
- ✅ 交互式模式，可连续计算
- ✅ 单次测试模式
- ✅ 友好的命令行界面
- ✅ 清晰的输出格式

## 技术特点

### 算法准确性
- 使用确定性算法
- 符合传统八字计算规则
- 经过多个测试用例验证
- 月柱、时柱计算已修复

### 智能化
- LLM智能理解复杂表达
- 自动识别历法类型
- 智能纠错和补全
- 统一的处理流程

### 代码质量
- 简洁的代码结构
- 统一的代码风格
- 清晰的文档注释
- 完善的测试体系

## 项目特色

1. **准确的八字计算**：使用确定性算法，确保计算结果准确
2. **智能输入解析**：使用LLM解析自然语言，支持灵活的输入格式
3. **智能取名建议**：基于八字五行分析，提供个性化取名建议
4. **批量取名功能**：支持批量生成20-30个名字，支持用户选择
5. **综合分析**：整合八字、平仄、笔画、三才五格等多维度分析
6. **交互式体验**：友好的命令行界面，支持多次选择分析
7. **高性能**：八字计算<10ms，综合分析<2秒
8. **完整的测试**：包含单元测试、集成测试、准确性验证和性能测试

## 版本信息

### 当前版本：v2.0.0

### 更新内容
- ✅ 统一LLM处理所有输入
- ✅ 移除type判断逻辑
- ✅ 修复月柱计算错误
- ✅ 修复时柱计算错误
- ✅ 简化用户流程
- ✅ 提高代码质量
- ✅ 整合文档体系

## 常见问题

### Q: 如何开始使用？
A:
1. 配置.env文件中的API密钥
2. 运行 `python test_bazi_agent.py`
3. 选择运行模式
4. 输入出生信息

### Q: 支持哪些输入格式？
A: 支持几乎所有常见的中文时间表达方式，包括自然语言和格式化输入，LLM会智能解析。

### Q: 八字计算准确吗？
A: 是的，经过多个测试用例验证，月柱和时柱的计算错误已全部修复。

### Q: 可以批量计算吗？
A: 可以，使用交互式模式可以连续输入多个出生信息进行计算。

### Q: 需要配置什么？
A: 只需要配置LLM API密钥，用于智能输入解析。八字计算本身不需要LLM。

## 技术支持

如有问题或建议，请通过以下方式联系：
- GitHub Issues
- 项目文档

## 许可证

MIT License